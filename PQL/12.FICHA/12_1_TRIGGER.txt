CREATE OR REPLACE TRIGGER IN_DIREC BEFORE INSERT ON DIRECTOR FOR EACH ROW
DECLARE
CONTGUI NUMBER;
CONTMU NUMBER;
CONTACTOR NUMBER;


BEGIN

SELECT COUNT(*) INTO CONTGUI FROM GUIONISTA WHERE NOM_PER=:NEW.NOM_PER;
SELECT COUNT(*) INTO CONTACTOR FROM ACTOR WHERE NOM_PER=:NEW.NOM_PER;
SELECT COUNT(*) INTO CONTMU FROM  MUSICO WHERE NOM_PER=:NEW.NOM_PER;

IF CONTGUI>0 OR CONTMU>0 OR CONTACTOR>0 THEN 

    IF CONTGUI=1 THEN 
        RAISE_APPLICATION_ERROR(-20001,'YA EXISTE EN LA TABLA GUINISTA');
    END IF;
     IF CONTACTOR=1 THEN 
        RAISE_APPLICATION_ERROR(-20002,'YA EXISTE EN LA TABLA ACTOR');
    END IF;
      RAISE_APPLICATION_ERROR(-20003,'YA EXISTE EN LA TABLA MUSICO');
END IF;

END;
