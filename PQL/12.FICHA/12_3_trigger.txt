CREATE OR REPLACE TRIGGER INS_PER BEFORE INSERT OR UPDATE ON PERSONA FOR EACH ROW

BEGIN


if :NEW.ANIO_NAC  is not null and :NEW.ANIO_DEF is not null then 
IF :NEW.ANIO_DEF < :NEW.ANIO_NAC   THEN 
    raise_application_error(-20001,'HA HABIDO UN PROBLEMA CON  ANIO DE NACIMIENTO Y EL ANIO DE DEFUNCION');
END IF;

end if;

 IF UPDATING('ANIO_NAC') OR UPDATING('ANIO_DEF') THEN
            raise_application_error(-20002, 'ERROR: SE HA MODIFICADO EL ANIO DE NACIMIENTO O EL DE DEFUNCION');
        END IF;
END;
/