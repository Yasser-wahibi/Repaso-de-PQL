CREATE OR REPLACE PROCEDURE deparcant IS

	CURSOR DEP IS
		SELECT COUNT(EMPLEADO.NUM_EMP) CONT, DEPARTAMENTO.NOMBRE NOMDEP
		FROM DEPARTAMENTO, EMPLEADO
		WHERE EMPLEADO.NUM_DEP = DEPARTAMENTO.NUM_DEPTO
		GROUP BY DEPARTAMENTO.NOMBRE;

	FILADEP DEP%ROWTYPE;

BEGIN

	OPEN DEP;

		LOOP
			FETCH DEP INTO FILADEP;
			EXIT WHEN DEP%NOTFOUND;
			DBMS_OUTPUT.PUT_LINE('DEPARTAMENTO: ' || FILADEP.NOMDEP || ' NUMERO DE EMPLEADO: '|| FILADEP.CONT);
		END LOOP;
	CLOSE DEP;

END;
/
