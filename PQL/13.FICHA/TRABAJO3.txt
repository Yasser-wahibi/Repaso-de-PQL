CREATE OR REPLACE PROCEDURE MAT_NO_ESP(NOM MATERIA.NOMBRE%TYPE, AMB MATERIA_NO_ESPECIAL.AMBITO%TYPE) IS 

ESTA NUMBER(2);
FILAMAT MATERIA%ROWTYPE;
BEGIN

--COMPROBAR DE QUE EL NOMBRE EXISTE 
    SELECT * INTO FILAMAT FROM MATERIA WHERE NOM= NOMBRE;


-- MIRAR SI ESTA EN LA TABA DE MATERIRA NO ESPECIAL
    SELECT COUNT(*) INTO ESTA FROM MATERIA_NO_ESPECIAL WHERE NOM=NOMBRE;

    IF ESTA >0 THEN 
        UPDATE MATERIA_NO_ESPECIAL SET AMBITO= AMB where NOM=NOMBRE;
    ELSE
        --CAMBIARLA POR LA FECHA DE AHORA
        UPDATE MATERIA_ESPECIAL SET FECHA = SYSDATe where NOMBRE=NOM;
    END IF;

    EXCEPTION 
    WHEN NO_DATA_FOUND THEN 
        DBMS_OUTPUT.PUT_LINE('eL NOMBRE DE LA MATERIA NO EXISTE');

END;
/